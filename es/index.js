var v=Object.create,p=Object.defineProperty,I=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,P=Object.getOwnPropertyNames,j=Object.getOwnPropertyDescriptor;var l=Object.assign,U=n=>p(n,"__esModule",{value:!0});var S=(n,r)=>()=>(r||(r={exports:{}},n(r.exports,r)),r.exports);var q=(n,r,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let y of P(r))!O.call(n,y)&&y!=="default"&&p(n,y,{get:()=>r[y],enumerable:!(e=j(r,y))||e.enumerable});return n},N=n=>q(U(p(n!=null?v(I(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var h=(n,r,e)=>new Promise((y,c)=>{var u=t=>{try{s(e.next(t))}catch(i){c(i)}},a=t=>{try{s(e.throw(t))}catch(i){c(i)}},s=t=>t.done?y(t.value):Promise.resolve(t.value).then(u,a);s((e=e.apply(n,r)).next())});var w=S((m,_)=>{(function(n,r){typeof m=="object"&&typeof _!="undefined"?r(m):typeof define=="function"&&define.amd?define(["exports"],r):r((n=n||self).queryString={})})(m,function(n){"use strict";function r(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(s){return null}}function e(a){try{return encodeURIComponent(a)}catch(s){return null}}function y(a,s){if(!a)return null;for(var t,i=/([^=?&]+)=?([^&]*)/g,f={};t=i.exec(a);){var o=r(t[1]),d=r(t[2]);if(!(o===null||d===null||o in f))if(s||typeof d!="string")f[o]=d;else{var b=Number(d),T=isNaN(b)?d:b;f[o]=d==T.toString()?T:d}}return f}function c(a,s){s===void 0&&(s="");var t,i,f=[];for(i in typeof s!="string"&&(s="?"),a)if(Object.prototype.hasOwnProperty.call(a,i)){if((t=a[i])||t!=null&&!isNaN(t)||(t=""),i=encodeURIComponent(i),t=encodeURIComponent(t),i===null||t===null)continue;f.push(i+"="+t)}return f.length?s+f.join("&"):""}var u={parse:y,stringify:c,decode:r,encode:e};n.decode=r,n.default=u,n.encode=e,n.parse=y,n.stringify=c,Object.defineProperty(n,"__esModule",{value:!0})})});var g=N(w()),x={},C=(y,c,...u)=>h(void 0,[y,c,...u],function*(n,r,e={}){let a,s="";e.method==="GET"?s="?"+g.default.stringify(r):a=r&&JSON.stringify(r);let t=(e.baseUrl||"")+n+s,i=t+a;if(e.cacheTime){let o=x[i];if(o&&Date.now()-o.time<e.cacheTime)return o}let f=Object.prototype.toString.call(r)==="[object FormData]";return e.headers||(e.headers={}),e.headers["Content-Type"]||(f?e.headers["Content-Type"]="application/x-www-form-urlencoded":e.headers["Content-Type"]="application/json"),e.method==="GET"&&!e.headers["Cache-Control"]&&(e.headers["Cache-Control"]="public, max-age=604800, immutable"),fetch(t,l(l({body:a},e),{headers:e.headers})).then(o=>h(void 0,null,function*(){return{body:yield o[e.format||"json"](),status:o.status,headers:o.headers}})).then(o=>h(void 0,null,function*(){return e.cacheTime&&(x[i]={data:o,time:Date.now()}),e.reduce&&(o=yield Promise.resolve(e.reduce(o))),e.onSuccess&&(yield Promise.resolve(e.onSuccess(o))),o})).catch(o=>h(void 0,null,function*(){e.onError&&(yield Promise.resolve(e.onError(o)))}))}),E=(n,r,e,y,c,u)=>h(void 0,null,function*(){if(typeof window=="undefined")return;let a="/"+r;return e&&(a+="?"+g.default.stringify(e)),C(a,y,l(l(l({},c),u),{method:n}))}),K={get:!0,post:!0,put:!0,del:!0,options:!0},R=(n={})=>{let r=e=>new Proxy(e,{get(c,u){if(!c[u])if(!K[u])c[u]=r({___parent:c.___parent?c.___parent+"/"+u:u});else{let a=u.toUpperCase(),s=c.___parent;c[u]=({query:t,body:i,options:f}={})=>E(a,s,t,i,n,f)}return c[u]}});return r({})};export{C as baseApi,R as createZeroApi};
